<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cookie Banner æµ‹è¯•</title>
  <link rel="stylesheet" href="/components/cookie-banner/silktide-consent-manager.css">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      margin: 0;
      padding: 40px;
      background: #f5f5f5;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    h1 { color: #333; }
    .info { background: #e3f2fd; padding: 15px; border-radius: 4px; margin: 20px 0; }
    button {
      background: #1976d2;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 10px;
    }
    button:hover { background: #1565c0; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸª Cookie Banner é›†æˆæµ‹è¯•</h1>

    <div class="info">
      <strong>æµ‹è¯•è¯´æ˜:</strong>
      <ul>
        <li>é¦–æ¬¡è®¿é—®åº”åœ¨é¡µé¢åº•éƒ¨çœ‹åˆ° Cookie Banner</li>
        <li>ç‚¹å‡»æŒ‰é’®å,Banner åº”æ¶ˆå¤±å¹¶æ˜¾ç¤º Cookie Icon</li>
        <li>ç‚¹å‡» Cookie Icon åº”æ‰“å¼€åå¥½è®¾ç½® Modal</li>
      </ul>
    </div>

    <div>
      <button onclick="checkLocalStorage()">æ£€æŸ¥ localStorage</button>
      <button onclick="clearLocalStorage()">æ¸…é™¤ localStorage</button>
      <button onclick="location.reload()">åˆ·æ–°é¡µé¢</button>
    </div>

    <div id="output" style="margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 4px; font-family: monospace; font-size: 12px;"></div>
  </div>

  <script src="/components/cookie-banner/silktide-consent-manager.js"></script>
  <script>
    // é…ç½® Silktide Cookie Banner
    const config = {
      background: {
        showBackground: true,
      },
      cookieIcon: {
        position: "bottomLeft",
      },
      bannerSuffix: "_auth",
      cookieTypes: [
        {
          id: "necessary",
          name: "å¿…è¦ Cookie",
          description: "è¿™äº› cookie å¯¹äºç½‘ç«™æ­£å¸¸è¿è¡Œæ˜¯å¿…éœ€çš„,æ— æ³•å…³é—­ã€‚",
          required: true,
          defaultValue: true,
        },
        {
          id: "analytics",
          name: "åˆ†æ",
          description: "è¿™äº› Cookie é€šè¿‡è·Ÿè¸ªå“ªäº›é¡µé¢æœ€å—æ¬¢è¿æ¥å¸®åŠ©æˆ‘ä»¬æ”¹è¿›ç½‘ç«™ã€‚",
          defaultValue: false,
          onAccept: () => console.log("[æµ‹è¯•] Analytics cookies accepted"),
          onReject: () => console.log("[æµ‹è¯•] Analytics cookies rejected"),
        },
      ],
      text: {
        banner: {
          description: "æˆ‘ä»¬åœ¨ç½‘ç«™ä¸Šä½¿ç”¨ Cookie æ¥æå‡æ‚¨çš„ç”¨æˆ·ä½“éªŒã€‚<a href=\"/cookie-policy\" target=\"_blank\">Cookie æ”¿ç­–</a>",
          acceptAllButtonText: "å…¨éƒ¨æ¥å—",
          acceptAllButtonAccessibleLabel: "æ¥å—æ‰€æœ‰ Cookie",
          rejectNonEssentialButtonText: "æ‹’ç»éå¿…è¦ Cookie",
          rejectNonEssentialButtonAccessibleLabel: "æ‹’ç»éå¿…è¦ Cookie",
          preferencesButtonText: "åå¥½è®¾ç½®",
          preferencesButtonAccessibleLabel: "åˆ‡æ¢åå¥½è®¾ç½®",
        },
        preferences: {
          title: "è‡ªå®šä¹‰æ‚¨çš„ Cookie åå¥½è®¾ç½®",
          description: "æˆ‘ä»¬å°Šé‡æ‚¨çš„éšç§æƒã€‚æ‚¨å¯ä»¥é€‰æ‹©ä¸å…è®¸æŸäº›ç±»å‹çš„ Cookieã€‚",
          creditLinkText: "å…è´¹è·å–æ­¤æ¨ªå¹…",
          creditLinkAccessibleLabel: "å…è´¹è·å–æ­¤æ¨ªå¹…",
        },
      },
      onAcceptAll: () => console.log("[æµ‹è¯•] All cookies accepted"),
      onRejectAll: () => console.log("[æµ‹è¯•] Non-essential cookies rejected"),
      onBackdropOpen: () => console.log("[æµ‹è¯•] Preferences modal opened"),
    }

    // ç­‰å¾… Silktide è„šæœ¬åŠ è½½å®Œæˆ
    function initCookieBanner() {
      if (window.silktideCookieBannerManager) {
        console.log("[æµ‹è¯•] Silktide è„šæœ¬å·²åŠ è½½,åˆå§‹åŒ–é…ç½®...")
        window.silktideCookieBannerManager.updateCookieBannerConfig(config)
      } else {
        console.log("[æµ‹è¯•] ç­‰å¾… Silktide è„šæœ¬åŠ è½½...")
        setTimeout(initCookieBanner, 100)
      }
    }

    // é¡µé¢åŠ è½½ååˆå§‹åŒ–
    window.addEventListener('DOMContentLoaded', initCookieBanner)

    // è¾…åŠ©å‡½æ•°
    function checkLocalStorage() {
      const output = document.getElementById('output')
      const keys = [
        'silktideCookieChoice_necessary_auth',
        'silktideCookieChoice_analytics_auth',
        'silktideCookieBanner_InitialChoice_auth'
      ]

      let html = '<strong>localStorage å†…å®¹:</strong><br><br>'
      keys.forEach(key => {
        const value = localStorage.getItem(key)
        html += `${key}: ${value || '(æœªè®¾ç½®)'}<br>`
      })

      output.innerHTML = html
    }

    function clearLocalStorage() {
      localStorage.removeItem('silktideCookieChoice_necessary_auth')
      localStorage.removeItem('silktideCookieChoice_analytics_auth')
      localStorage.removeItem('silktideCookieBanner_InitialChoice_auth')

      document.getElementById('output').innerHTML = '<strong>âœ“ localStorage å·²æ¸…é™¤</strong><br>è¯·åˆ·æ–°é¡µé¢ä»¥é‡æ–°æ˜¾ç¤º Banner'
      console.log("[æµ‹è¯•] localStorage å·²æ¸…é™¤")
    }

    // åˆå§‹æ˜¾ç¤º localStorage çŠ¶æ€
    setTimeout(checkLocalStorage, 1000)
  </script>
</body>
</html>
