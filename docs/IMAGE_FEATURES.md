# 图片功能实现说明

## 已实现的功能

✅ **图片点击选中**
- 点击图片可以选中图片
- 选中的图片会显示蓝色边框高亮效果

✅ **图片删除**
- 选中图片后,底部会显示浮动工具栏
- 点击垃圾桶图标可以删除图片

✅ **调整图片大小**
- 在浮动工具栏的"宽度"输入框中输入数值(如 `400` 或 `400px`)
- 按回车或失焦后应用更改
- 输入空值可恢复图片原始大小

✅ **图片对齐方式**
- 左对齐:点击左对齐图标
- 居中对齐:点击居中图标
- 右对齐:点击右对齐图标
- 当前激活的对齐方式会显示高亮

## 技术实现

### 文件修改
1. `/lib/tiptap-extensions.ts` - 创建自定义图片扩展 `CustomImage`
   - 支持 `width`, `height`, `align` 属性
   - 自定义节点视图,使图片可点击选中
   - 添加自定义 `setImage` 命令

2. `/components/ui/image-menu.tsx` - 新建图片浮动工具栏组件
   - 监听编辑器选中状态
   - 仅在图片被选中时显示
   - 提供删除、调整大小、对齐功能

3. `/components/tiptap-editor.tsx` - 更新编辑器主组件
   - 使用 `CustomImage` 替换默认的 `Image` 扩展
   - 添加 `ImageMenu` 组件
   - 更新图片插入逻辑,默认左对齐

4. `/app/globals.css` - 添加图片样式
   - 图片容器对齐样式
   - 图片悬停效果
   - 选中图片的高亮效果(支持深色模式)

## 使用方法

1. **插入图片**:点击工具栏的图片图标,选择文件上传

2. **选中图片**:点击编辑器中的图片

3. **编辑图片**:
   - 图片被选中后,编辑器底部会出现浮动工具栏
   - 使用工具栏中的按钮和输入框进行编辑

4. **删除图片**:选中图片后,点击浮动工具栏中的垃圾桶图标

## 样式特性

- 选中图片会显示蓝色边框(深色模式自动适配)
- 图片悬停时会略微变暗并显示阴影
- 浮动工具栏固定在屏幕底部居中位置
- 所有按钮和输入框都采用了系统主题色

## 注意事项

- 编译成功,无严重错误
- 保留了原有的图片上传功能
- 所有新增样式支持亮色和深色主题
